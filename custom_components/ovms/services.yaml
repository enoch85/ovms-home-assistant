send_command:
  name: Send command
  description: Send a command to the OVMS module.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle to send command to
      required: true
      example: "my_car"
      selector:
        text:
    command:
      name: Command
      description: Command to send
      required: true
      example: "stat"
      selector:
        text:
    parameters:
      name: Parameters
      description: Command parameters
      required: false
      example: "range"
      selector:
        text:
    command_id:
      name: Command ID
      description: Unique ID for this command (auto-generated if not provided)
      required: false
      selector:
        text:
    timeout:
      name: Timeout
      description: Timeout in seconds to wait for response
      required: false
      default: 10
      selector:
        number:
          min: 1
          max: 60

set_feature:
  name: Set feature
  description: Set an OVMS module feature.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    feature:
      name: Feature
      description: Feature name to set
      required: true
      selector:
        text:
    value:
      name: Value
      description: Value to set
      required: true
      selector:
        text:

control_climate:
  name: Control climate
  description: Control the vehicle's climate system.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    temperature:
      name: Temperature
      description: Target temperature
      required: false
      selector:
        number:
          min: 15
          max: 30
          step: 0.5
          unit_of_measurement: "Â°C"
    hvac_mode:
      name: HVAC Mode
      description: Mode to set (for VW e-UP, use "on" or "off")
      required: false
      selector:
        select:
          options:
            - "on"
            - "off"
            - "heat"
            - "cool"
            - "auto"
    duration:
      name: Duration
      description: Duration in minutes
      required: false
      selector:
        number:
          min: 1
          max: 60
          unit_of_measurement: "min"

control_charging:
  name: Control charging
  description: Control the vehicle's charging system.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    action:
      name: Action
      description: Charging action
      required: true
      selector:
        select:
          options:
            - "start"
            - "stop"
            - "status"
    mode:
      name: Mode
      description: Charging mode
      required: false
      selector:
        select:
          options:
            - "standard"
            - "storage"
            - "range"
            - "performance"
    limit:
      name: Limit
      description: Charge limit (percentage)
      required: false
      selector:
        number:
          min: 1
          max: 100
          unit_of_measurement: "%"

homelink:
  name: Homelink button
  description: Activate a homelink button on the OVMS module. For Smart ForTwo vehicles, these buttons control climate functions with SoC > 30% required.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    button:
      name: Button
      description: Homelink button number (1-3)
      required: true
      selector:
        select:
          options:
            - label: "Button 1: 5min climate boost"
              value: "1"
            - label: "Button 2: 10min climate boost"
              value: "2"
            - label: "Button 3: 15min climate boost or 12V charging"
              value: "3"

climate_schedule:
  name: Climate schedule
  description: Manage scheduled precondition times for the vehicle's climate system. Supports multiple times per day with individual durations.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    action:
      name: Action
      description: Schedule action to perform
      required: true
      selector:
        select:
          options:
            - label: "Set schedule for a day"
              value: "set"
            - label: "List all schedules"
              value: "list"
            - label: "Clear schedule"
              value: "clear"
            - label: "Copy schedule to other days"
              value: "copy"
            - label: "Enable scheduling"
              value: "enable"
            - label: "Disable scheduling"
              value: "disable"
            - label: "Show status"
              value: "status"
    day:
      name: Day
      description: Day of week (required for set/clear/copy actions)
      required: false
      selector:
        select:
          options:
            - "mon"
            - "tue"
            - "wed"
            - "thu"
            - "fri"
            - "sat"
            - "sun"
            - "all"
    times:
      name: Times
      description: "Schedule times for the day. Format: HH:MM[/duration][,HH:MM[/duration],...] (e.g., '07:30/10,17:45/15')"
      required: false
      example: "07:30/10,17:45/15"
      selector:
        text:
    target_days:
      name: Target days
      description: "Target days for copy action. Supports ranges and lists (e.g., 'tue-fri' or 'sat,sun')"
      required: false
      example: "tue-fri"
      selector:
        text:

tpms_map:
  name: TPMS sensor mapping
  description: Manage TPMS sensor-to-wheel mapping for wheel rotation/swap scenarios.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    action:
      name: Action
      description: TPMS mapping action to perform
      required: true
      selector:
        select:
          options:
            - label: "Show current mapping"
              value: "status"
            - label: "Get mapping (machine-readable)"
              value: "get"
            - label: "Set new mapping"
              value: "set"
            - label: "Reset to default"
              value: "reset"
    mapping:
      name: Mapping
      description: "Sensor mapping for set action using wheel position names (e.g., 'fl=rr fr=fl rl=fr rr=rl')"
      required: false
      example: "fl=rr fr=fl rl=fr rr=rl"
      selector:
        text:

aux_monitor:
  name: 12V auxiliary monitor
  description: Control the 12V auxiliary battery monitor for automatic shutdown/reboot based on voltage levels.
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    action:
      name: Action
      description: Aux monitor action to perform
      required: true
      selector:
        select:
          options:
            - label: "Show status"
              value: "status"
            - label: "Enable monitoring"
              value: "enable"
            - label: "Disable monitoring"
              value: "disable"
    low_threshold:
      name: Low threshold
      description: Low voltage threshold in volts (optional for enable action)
      required: false
      selector:
        number:
          min: 10.0
          max: 14.0
          step: 0.1
          unit_of_measurement: "V"
    charging_threshold:
      name: Charging threshold
      description: Charging voltage threshold in volts (optional for enable action)
      required: false
      selector:
        number:
          min: 12.0
          max: 15.0
          step: 0.1
          unit_of_measurement: "V"

refresh_metrics:
  name: Refresh metrics
  description: Request a metrics refresh from the OVMS module. Uses fast on-demand requests on edge firmware, falls back to 'server v3 update all' on legacy firmware (3.3.005 and older).
  fields:
    vehicle_id:
      name: Vehicle ID
      description: ID of the vehicle
      required: true
      selector:
        text:
    pattern:
      name: Pattern
      description: "Metric pattern to request (edge firmware only). Use '*' for all metrics, or patterns like 'v.b.*' for battery metrics. Legacy firmware ignores this and updates all metrics."
      required: false
      default: "*"
      example: "v.b.*"
      selector:
        text:
